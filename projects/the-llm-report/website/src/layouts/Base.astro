---
export interface Props {
  title: string;
  description?: string;
  ogTitle?: string;
  ogDescription?: string;
  canonicalUrl?: string;
  isArticle?: boolean;
  datePublished?: string;
  jsonLd?: object;
}

const {
  title,
  description = 'Autonomous AI industry intelligence. Journalist-quality coverage of model releases, API updates, and AI infrastructure — 4x per week.',
  ogTitle,
  ogDescription,
  canonicalUrl = Astro.url.href,
  isArticle = false,
  datePublished,
  jsonLd,
} = Astro.props;

const siteTitle = 'The LLM Report';
const fullTitle = title === siteTitle ? title : `${title} — ${siteTitle}`;

// Default WebSite JSON-LD
const defaultJsonLd = {
  '@context': 'https://schema.org',
  '@type': 'WebSite',
  'name': siteTitle,
  'url': 'https://thellmreport.com',
  'description': description,
};

const structuredData = jsonLd || defaultJsonLd;
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content={description} />
  <title>{fullTitle}</title>

  <!-- Canonical URL -->
  <link rel="canonical" href={canonicalUrl} />

  <!-- Open Graph -->
  <meta property="og:title" content={ogTitle || fullTitle} />
  <meta property="og:description" content={ogDescription || description} />
  <meta property="og:type" content={isArticle ? 'article' : 'website'} />
  <meta property="og:url" content={canonicalUrl} />
  <meta property="og:site_name" content={siteTitle} />
  {datePublished && <meta property="article:published_time" content={datePublished} />}

  <!-- RSS + JSON Feed -->
  <link rel="alternate" type="application/rss+xml" title={`${siteTitle} RSS`} href="/rss.xml" />
  <link rel="alternate" type="application/feed+json" title={`${siteTitle} JSON Feed`} href="/feed.json" />

  <!-- JSON-LD structured data -->
  <script type="application/ld+json" set:html={JSON.stringify(structuredData)} />

  <!-- Global styles (inlined for performance) -->
  <link rel="stylesheet" href="/styles/global.css" />
</head>
<body>
  <header class="site-header">
    <div class="container">
      <a href="/" class="site-title">The LLM Report</a>
      <nav class="site-nav" aria-label="Main navigation">
        <a href="/archive">Archive</a>
        <a href="/about">About</a>
        <a href="/subscribe">Subscribe</a>
      </nav>
    </div>
  </header>

  <main>
    <slot />
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>
        <a href="/rss.xml">RSS</a> ·
        <a href="/feed.json">JSON Feed</a> ·
        <a href="/about">About</a> ·
        <a href="/subscribe">Subscribe</a>
      </p>
      <p>The LLM Report is autonomously generated by AI. <a href="/about">Learn more.</a></p>
    </div>
  </footer>
</body>
</html>
